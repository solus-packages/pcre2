name       : pcre2
version    : '10.23'
release    : 4
source     :
    - https://ftp.pcre.org/pub/pcre/pcre2-10.23.tar.bz2 : dfc79b918771f02d33968bd34a749ad7487fa1014aeb787fad29dd392b78c56e
license    : BSD-3-Clause
component  : programming.library
summary    : New PCRE library implementation
description: |
    PCRE2 is a re-working of the original PCRE library to provide an entirely new API.
builddeps  :
    - pkgconfig(valgrind)
patterns   :
    - devel :
        - /usr/bin
    - docs :
        - /usr/share/man
        - /usr/share/doc
setup      : |
    %patch -p2 < $pkgfiles/security/cve-2017-7186.patch
    %patch -p2 < $pkgfiles/security/cve-2017-8786.patch
    %configure --disable-static \
               --enable-pcre2-16 \
               --enable-pcre2-32 \
               --enable-jit
build      : |
    %make
install    : |
    %make_install
    rm -v $installdir/usr/bin/pcre2{grep,test}
check      : |
    %make check
